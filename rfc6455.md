## 1.9. Subprotocolos usando o protocolo Websocket

_Esta seção é não normativa_

O cliente pode requisitar que o servidor use um subprotocolo específico incluindo o campo |Sec-WebSocket-Protocol| no handshake dele. Se é especificado, o servidor precisa incluir o mesmo campo e um dos valores de subprotocolo selecionado na sua resposta para a conexão ser estabelecida.

Estes nomes subprotocolos devem ser registrados conforme a Seção [11.5](https://tools.ietf.org/html/rfc6455#section-11.5). Para evitar colisões em potencial, é recomendado o uso de nomes que contem a versão ASCII do nome de um domínio do originador de subprotocolos. Por exemplo, se a Example Corporation forem criar um subprotocolo de chat para ser implementado em muitos servidor da Web, eles poderiam nomina-lo como }"chat.example.com". Se a Example Organization chamar seu subprotocolo concorrente "de chat.example.org", então os dois subprotocolos deveriam ser implementados pelos servidores simultaneamente, com o servidor dinamicamente selecionando qual subprotocolo é usado baseado no valor enviado pelo **client**.

Subprocolos podem ser versionados em versão anteriores incompatíveis trocando o nome do subprotocolo, por exemplo, indo de "booking.example.net" para "v2.booking.example.net". Esses subprotocolos seriam considerados completamente separados pelos **clients** de WebSocket. Versionamento de compatibilidade com versões anteriores podem ser implementadas reusando a mesma string subprotocolo mas projetando cuidadosamente o protocolo atual para suportar esse tipo de extensibilidade.

## 2. Requisitos de conformidade

Todos diagramas, examples e notas nessa especificação são não normativas, assim como são todas as seções marcadas explicitamente não normativas. Tudo a mais nessa especificação é normativa.

As palavras chaves "PRECISA", "NÃO PRECISA", "OBRGATÓRIO", "DEVE", "NÃO DEVE", "PODERIA", "NÃO PODERIA", "RECOMENDADO", "PODE" e "OPCIONAL" neste documento são impretados como descrito em [RFC2119](https://tools.ietf.org/html/rfc2119).

......

## 2.1 Terminologia e outros conveções

_ASCII_ significa o esquema de codificação de caracter definido em [ANSI.X3-4.1986](https://tools.ietf.org/html/rfc6455#ref-ANSI.X3-4.1986).

Este documento faz referença para os valores UTF-8 e o uso do formato de notação UTF-8 assim definido in STD 63 [RFC3629](https://tools.ietf.org/html/rfc3629).

Termos chaves, como algoritimos nomeados ou definidos são indicados _assim_.

Nomes de campos de cabeçalhos ou variáveis são indicados |assim|;

Valores de variáveis são indicados /assim/.

Este documento referencia o procedimento para _Falha na Conexão de WebSocket_. Este procedimento está definido em [Seção 7.1.7](https://tools.ietf.org/html/rfc6455#section-7.1.7).

_Convertendo uma string para ASCII em minusculo_ significa substituir todos os caracteres no intervalo U+0041 até U+005A (isto é, letra latina maiúscula A até letra latina maiúscula Z) com o caracter correspondente no intervalo U+0061 até U+007A (isto é, letra latina minuscula A até letra latina minuscula Z).

Comparando essas duas string em _ASCII sem distinção entre maiscula e minuscula_ siginifica comparar elas exatamente como são, ponto por ponto, exceto quando o caracter está no intervalo U+0041 até U+005A (isto é, letra latina maiúscula A até letra latina maiúscula Z) e o caracter correspondente no intervalo U+0061 até U+007A (isto é, letra latina minuscula A até letra latina minuscula Z) são consideradas correspondentes.

O termo "URI" é usado nesse documento como definido em [RFC3986](https://tools.ietf.org/html/rfc3986).

Quando uma implementação é obrigatoria para _enviar_ dados como parte de um protocolo WebSocket, a implementação pode atrasar a transmissão atual arbitrariamente, por exemplo, armazenando dados em buffer para enviar menos pacotes IP.

Note que este documento usa ambas variações de ABNF [RFC5234](https://tools.ietf.org/html/rfc5234) e [RFC2616](https://tools.ietf.org/html/rfc2616) em diferentes seções.

## 3 URIs de WebSockets
Esta especificação define dois esquemas de URI, usando a ABNF sintaxe definida em [RFC5234](https://tools.ietf.org/html/rfc5234), e terminologia e produçoes ABNF definidas pela especificação de URI [RFC3986](https://tools.ietf.org/html/rfc3986).

> ws-URI = "ws:" "//" host [ ":" port ] path [ "?" query ]
> wss-URI = "wss:" "//" host [ ":" port ] path [ "?" query ]
>
> host = <host, definido em [[RFC3986], Seção 3.2.2](https://tools.ietf.org/html/rfc3986#section-3.2.2)>
> port = <port, definido emdefinido em [[RFC3986], Seção 3.2.3](https://tools.ietf.org/html/rfc3986#section-3.2.3)>
> path = <path-abempty, definido em [[RFC3986], Seção 3.3](https://tools.ietf.org/html/rfc3986#section-3.3)>
> query = <query, definido em [[RFC3986], Seção 3.4](https://tools.ietf.org/html/rfc3986#section-3.4)>

A porta é um componente OPCIONAL; o valor padrão para "ws" é a porta 80, enquanto o padrão para "wss" é a porta 443.

A URI é chamada "segura" (e isso é dito que "a propriedade segura está configurada") se o componente esquema corresponde "wss" não importando se é maiscula ou minuscula.

O "[nome do recurso](https://tools.ietf.org/html/rfc6455#section-4.1)" pode ser contruido contacteando o seguinte:

- "/" se o caminho do componente é vazio
- o caminho do componente
- "?" se o componente da consulta não é vazio
- o componente de consulta

Identificadores de fragmento não tem significados no contexto de URIs de WebSocket e NÃO DEVEM ser usados nessas URIs. Como qualquer esquema de UR, o caracter "#", quando não estiver indicando o começo de um fragmento, DEVE ser substituidos por %23.








































